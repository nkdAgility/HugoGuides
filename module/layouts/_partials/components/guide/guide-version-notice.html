{{/* Guide Version Notice Component
  Purpose: Display a notice about guide versioning for historical versions
  Input: A guide page context
  Output: HTML notice about the version status
*/}}

{{- if eq .Type "guide" -}}
  {{- $currentVersion := partial "functions/get-guide-version.html" . -}}
  {{- if $currentVersion -}}
    {{- $latestVersion := partial "functions/get-latest-version" . -}}
    {{- if ne $currentVersion $latestVersion -}}
      {{- $sectionPage := .Site.GetPage .Section -}}
      {{- if $sectionPage -}}
        <div class="alert alert-info mb-4" role="alert">
          <div class="d-flex align-items-start">
            <i class="fa-solid fa-info-circle me-2 mt-1 flex-shrink-0"></i>
            <div>
              <strong>{{ i18n "guide_historical_version_notice_title" }}</strong>
              {{ i18n "guide_historical_version_notice_text" (dict "CurrentVersion" $currentVersion) }}
              <a href="{{ $sectionPage.RelPermalink }}" class="alert-link">{{ i18n "guide_historical_version_notice_link" (dict "LatestVersion" $latestVersion) }}</a> {{ i18n "guide_historical_version_notice_suffix" }}
            </div>
          </div>
        </div>
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
